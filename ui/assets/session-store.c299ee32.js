import{E as g,a7 as c,a8 as _,m as a,a9 as p}from"./index.374e2772.js";import{a as h}from"./axios.7331a07d.js";function m(e){return c(e)===!0?"__q_date|"+e.toUTCString():_(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function f(e){if(e.length<9)return e;const o=e.substring(0,8),t=e.substring(9);switch(o){case"__q_date":return new Date(t);case"__q_expr":return new RegExp(t);case"__q_numb":return Number(t);case"__q_bool":return Boolean(t==="1");case"__q_strn":return""+t;case"__q_objt":return JSON.parse(t);default:return e}}function b(){const e=()=>null;return{has:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:g,remove:g,clear:g,isEmpty:()=>!0}}function y(e){const n=window[e+"Storage"],o=t=>{const r=n.getItem(t);return r?f(r):null};return{has:t=>n.getItem(t)!==null,getLength:()=>n.length,getItem:o,getIndex:t=>t<n.length?o(n.key(t)):null,getKey:t=>t<n.length?n.key(t):null,getAll:()=>{let t;const r={},i=n.length;for(let l=0;l<i;l++)t=n.key(l),r[t]=o(t);return r},getAllKeys:()=>{const t=[],r=n.length;for(let i=0;i<r;i++)t.push(n.key(i));return t},set:(t,r)=>{n.setItem(t,m(r))},remove:t=>{n.removeItem(t)},clear:()=>{n.clear()},isEmpty:()=>n.length===0}}const u=a.has.webStorage===!1?b():y("local"),s={install({$q:e}){e.localStorage=u}};Object.assign(s,u);const k=p("session",{state:()=>({token:s.getItem("token")||null,baseUrlApi:s.getItem("api_url")||null,devices:s.getItem("devices")||[],sessionApi:null}),getters:{getToken:e=>e.token,getApiUrl:e=>e.baseUrlApi},actions:{login(e,n){this.token=e,this.baseUrlApi=n,s.set("token",e),s.set("api_url",n),this.initAxios()},logout(){this.token=null,this.baseUrlApi=null,this.devices=[],this.sessionApi=null,s.remove("token"),s.remove("api_url"),s.remove("devices")},initAxios(){this.sessionApi=h.create({baseURL:this.baseUrlApi})},setDevices(e){this.devices=e,s.set("devices",e)},isLoggedin(){return this.token!==null&&this.baseUrlApi!==null}}});export{k as u};
